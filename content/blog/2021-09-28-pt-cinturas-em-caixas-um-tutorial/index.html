---
title: '{PT} Cinturas em caixas: um tutorial'
layout: single-sidebar
excerpt: "Voc√™ j√° pensou como as cinturas em caixas podem ser informativas? N√£o? Ent√£o venha comigo neste mini-tutorial que eu vou te mostrar como! üòä"
author: Isabella Bicalho Frazeto
date: '2021-09-28'
slug: ViolinPlot
categories: 
  - Graficos
tags: 
  - PT
  - Graficos
images: ~
series: ~
alt: ''
featured: yes
draft: no
image:
  focal_point: 'Center'
  preview_only: no
lastmod: '2021-09-28'
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="introdu√ß√£o" class="section level1">
<h1>Introdu√ß√£o</h1>
<p>Voc√™ j√° pensou como as cinturas em caixas podem ser informativas? N√£o? Ent√£o venha comigo neste mini-tutorial que eu vou te mostrar como! üòä</p>
<p>Nas sess√µes <a href="#s1">1</a> e <a href="#s2">2</a>, mostrarei o que s√£o um <em>boxplot</em> e um <em>violin plot</em> e discutirei - brevemente üòÖ - as vantagens de usar cada um deles. Na <a href="#s3">sess√£o 3</a>, falo sobre as vantagens de plotar os dois gr√°ficos em conjunto e na <a href="#s4">sess√£o 4</a> mostro como cria-los em <svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p>
<div id="s1" class="section level2">
<h2>Box plot</h2>
<p>O boxplot - tamb√©m conhecido como diagrama de caixa, de quartil ou, meu favorito, gr√°fico de caixa de bigode <img src="mustache.png" style="width: 5%;"/> - √© um gr√°fico que permite visualizar a distribui√ß√£o do nosso conjunto de dados. √â um gr√°fico cl√°ssico em que a mediana √© o centro de uma caixa e o primeiro e o terceiro quartil formam o ret√¢ngulo. Os ‚Äúbigodes‚Äù da caixa s√£o formados pelo limite inferior e pelo limite superior. Normalmente, os outliers (dados discrepantes) s√£o representados por pequenos pontos no gr√°fico.</p>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="s2" class="section level2">
<h2>Violin plot</h2>
<p>O violin plot √© bastante similar a um box plot, mas com a vantagem de usar um <em>kernel de densidade sim√©trico</em> que se distribui em ambos os lados do ‚Äúviolino‚Äù; ou seja, ela tamb√©m consegue refletir a densidade de probabilidade (como aquela linha que a gente costuma ver em cima do histograma). A maior do violin plot √© que ela consegue ser mais informativo que um boxplot, pois mostra todo o conjunto dos dados. Infelizmente, n√£o √© um gr√°fico t√£o popular, o que pode levar a alguma confus√£o sobre sua interpreta√ß√£o.</p>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="s3" class="section level2">
<h2>Por que usar os dois juntos?</h2>
<p>O salto do gato √© que voc√™ pode plotar o boxplot e o plot do violino no mesmo gr√°fico. Essa sobreposi√ß√£o √© especialmente importante se seus dados forem multimodais, pois isso √© evidente no gr√°fico de violino e n√£o no gr√°fico de caixa. Outra vantagem √© que tamb√©m evita que voc√™ termine com um boxplot, um histograma + estimativa de densidade de kernel para cada vari√°vel. Pela pr√≥pria natureza dos gr√°ficos, tamb√©m √© mais f√°cil visualizar sua amostra por fatores diferentes.</p>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="s4" class="section level2">
<h2>Tutorial</h2>
<p>Comece com a instala√ß√£o dos pacotes <strong>ggplot2</strong> e <strong>datasets</strong> no seu ambiente <svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>. Em seguida, carregue os pacotes instalados.</p>
<pre class="r"><code>## Instalar os pacotes
install.packages(&quot;ggplot2&quot;)
install.packages(&quot;datasets&quot;)
## Carregar os pacotes
library(datasets)
library(ggplot2)</code></pre>
<p>Aqui, vamos usar dois data sets diferentes: ‚ÄòplantGrowth‚Äô e o ‚ÄòInsectSprays‚Äô.</p>
<pre class="r"><code>data(&quot;PlantGrowth&quot;); data(&quot;InsectSprays&quot;)</code></pre>
<p>O conjunto de dados PlantGrowth cont√©m os resultados de um experimento que teve como objetivo comparar o crescimento de plantas entre um grupo de controle com dois outros grupos experimentais. A tabela possui duas vari√°veis: <em>weight</em> (peso) e <em>group</em> (grupo).</p>
<pre class="r"><code>head(PlantGrowth)</code></pre>
<pre><code>##   weight group
## 1   4.17  ctrl
## 2   5.58  ctrl
## 3   5.18  ctrl
## 4   6.11  ctrl
## 5   4.50  ctrl
## 6   4.61  ctrl</code></pre>
<p>J√° o dataset InsectSprays √© o resultado da contagem de insetos em unidades experimentais agr√≠colas tratadas com diferentes inseticidas. Possui duas colunas: <em>count</em> (quantidade) e <em>spray</em>.</p>
<pre class="r"><code>head(InsectSprays)</code></pre>
<pre><code>##   count spray
## 1    10     A
## 2     7     A
## 3    20     A
## 4    14     A
## 5    14     A
## 6    12     A</code></pre>
</div>
<div id="plantgrowth" class="section level2">
<h2>PlantGrowth</h2>
<p>Com o ggplot2 √© poss√≠vel plotar dois gr√°ficos ‚Äúsobrepostos‚Äù em uma √∫nica figura. Para isso utilizamos o simbolo ‚Äúsoma‚Äù (+) que vai ‚Äúunir‚Äù dois objetos geom√©tricos <em>gg</em>. Na sequ√™ncia vemos o primeiro gr√°fico criado.</p>
<pre class="r"><code>ggplot(PlantGrowth, aes(x = weight, # no eixo &#39;x&#39; vai o peso
                        y = group)) + # no eixo y os &#39;grupo
        geom_violin() + # plotar o violin plot
        geom_boxplot()  # plotar o boxplot</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Como nosso primeiro gr√°fico n√£o tem uma est√©tica bonita, √© poss√≠vel executar alguns comandos para torn√°-lo mais agrad√°vel e informativo.</p>
<p>O primeiro passo √© mudar a largura dos boxplots. Para isso, usaremos o comando <code>width = 0.3</code> como par√¢metro dentro da chamada do <code>boxplot()</code>. Tamb√©m vamos mudar o tema com a fun√ß√£o <code>theme_light()</code>. O objetivo √© deixar o gr√°fico mais coeso.</p>
<pre class="r"><code>ggplot(PlantGrowth, aes(x = weight, y = group)) + 
  theme_light() + # mudan√ßa de tema (est√©tica) do background
  geom_violin() +
  geom_boxplot(width = 0.3) # diminui√ß√£o das caixas</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Em seguida, voc√™ pode escolher alterar o √¢ngulo das caixas, colocando-as na vertical. Nesse caso, apenas pe√ßa que as coordenadas sejam invertidas usando <code>coord_flip()</code>.</p>
<pre class="r"><code>ggplot(PlantGrowth, aes(x = weight, y = group)) + 
  theme_light() +
  geom_violin() +
  geom_boxplot(width = 0.3) +
  coord_flip() # caixas na vertical</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Por fim, vamos colorir os violinos e deixas as caixas com contornos em cinza. Para tal usaremos as fun√ß√µes <code>aes(fill = group, color = group, alpha = 0.5)</code> em <code>geom_violin()</code> e <code>color = "grey20"</code> em <code>geom_boxplot()</code>. Tamb√©m vamos remover a legenda do gr√°fico com <code>theme(legend.position = "none")</code>, pois a distin√ß√£o entre grupos j√° est√° explicada no eixo x.</p>
<pre class="r"><code>ggplot(PlantGrowth, aes(x = weight, y = group)) + 
  theme_light() +
  geom_violin(aes(fill = group, # colorir o interior dos violinos em fun√ß√£o dos grupos
                  color = group, # colorir o contorno dos violinos em fun√ß√£o dos grupos
                  alpha = 0.5)) + # deixar as cores transparentes (50% de transpar√™ncia)
  geom_boxplot(width = 0.3, 
               color = &quot;grey30&quot;) + # contorno do boxplot em cinza escuro
  coord_flip() +
  theme(legend.position = &quot;none&quot;) # retirar a legenda</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="insect-sprays" class="section level2">
<h2>Insect Sprays</h2>
<p>E que tal um segundo exemplo bem simples e charmoso com os dados de InsectSprays?</p>
<pre class="r"><code>ggplot(InsectSprays, # tabela de dados
       aes(x = spray, # no eixo &#39;x&#39; os grupos da coluna spray
           y = count, # no eixo &#39;y&#39; a contagem de insetos
           color = spray)) + # colorir os gr√°ficos em fun√ß√£o de &#39;spray&#39;
  theme_light() + # mudar o tema do gr√°fico - cores e estilo do background
  geom_violin() + # plotar o violino
  geom_boxplot(width = 0.05) # plotar as caixas mais &#39;finas&#39; que o default</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="fim" class="section level2">
<h2>FIM!!</h2>
<p>O que voc√™ achou do texto? Queremos saber a sua opini√£o! ‚úåÔ∏è</p>
<p>Tamb√©m estamos a disposi√ß√£o para d√∫vidas! üëáüëá</p>
<p>Voc√™ pode deixar um coment√°rio nesta postagem (basta logar pelo GitHub) ou l√° no nosso twitter!</p>
<blockquote class="twitter-tweet">
<p lang="pt" dir="ltr">
üëâüèæ Ei, voc√™ conhece o nosso blog? Veja as nossas postagens em <a href="https://t.co/YDGvDef4PF">https://t.co/YDGvDef4PF</a>!<br><br>‚Äî‚Äî<br><br>üëâüèæ Oye, ¬øconoces nuestro blog? ¬°Vea nuestras publicaciones en <a href="https://t.co/YDGvDef4PF">https://t.co/YDGvDef4PF</a>!
</p>
‚Äî Soma dos Quadrados (<span class="citation">@somaquadrados</span>) <a href="https://twitter.com/somaquadrados/status/1442970277567160320?ref_src=twsrc%5Etfw">September 28, 2021</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
</div>
