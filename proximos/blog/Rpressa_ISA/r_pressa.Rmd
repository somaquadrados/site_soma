---
title: "R para quem tem pressa"
author: "Isabella Bicalho Frazeto"
date: "28/03/2021"
output: html_document
---

# R para quem tem pressa: Parte I

## (ou R para quem n√£o quer aprender R)

![](run_forest.gif)

Esse tutorial √© para voc√™ que precisa aprender **R** por algum motivo de for√ßa maior, n√£o sabe absolutamente nada sobre e precisa de um lugar para come√ßar. O objetivo aqui *n√£o* √© te ensinar a programar, muito menos te ensinar a fazer an√°lises estat√≠sticas, mas sim te ensinar um pouco sobre o **‚ú®R base‚ú®**.

## O que voc√™ precisa para seguir esse tutorial?

Esse tutorial vem acompanhado de Rmarkdown (um "editor de texto" que possibilita a inclus√£o de c√≥digos de programa√ß√£o em R dentro dele). O markdown e a tabela que usaremos est√£o dispon√≠veis no meu [GitHub](https://github.com/bellabf/r_pressa) ([O que √© um GitHub?](https://www.somaquadrados.com/blog/git/github/)). Como pr√©-requisitos voc√™ precisa [instalar o R, o Rstudio](https://didatica.tech/como-instalar-a-linguagem-r-e-o-rstudio/) e possuir um *tico* (ü§è) de disposi√ß√£o.

## Por que R?

R √© uma linguagem *open-source* (= voc√™ n√£o precisa pagar uma licen√ßa para us√°-la). FALAR SOBRE IMPORT√ÇNCIA DO R BASE E DEIXAR A PARTE DOS PACOTES PRA PARTE II.

## O "R Base"

### Objetos

Ao usar R, a primeira coisa que voc√™ precisa saber √© que letras min√∫sculas e mai√∫sculas t√™m valores diferentes. Ou seja, 'X' e 'x' n√£o s√£o iguais. A segunda informa√ß√£o √© que n√≥s armazenamos (ou indexamos) valores com os quais estamos trabalhando em **objetos**.

Criar um objeto √© uma forma de "salvar valores" dentro da mem√≥ria do nosso computador (objeto **‚Üí** üß†üíª), tornando poss√≠vel "cham√°-los" para uso quando quisermos. Para atribuir um valor a um objeto, usamos um "operador de atribui√ß√£o", composto de um sinal de 'menor' e um h√≠fen (`<-`):

<center>

![](index.png){width="521"}

</center>

No c√≥digo R, isso √©:

```{r}
identificador <- "valor"
```

**Por exemplo**: Quero armazenar o valor "1" em um objeto chamado "a" e o valor "2" em um objeto chamado "A".

```{r}
a <- 1 
A <- 2
```

Sempre que avaliarmos o objeto "a" (‚ö† Ô∏è**CRTL + Enter** no nome do objeto), o R retornar√° o valor "1", ...

```{r}
a
```

... e para "A", o valor de "2".

```{r}
A
```

Cada objeto pode armazenar apenas uma estrutura de dados por vez (um valor ou uma sequ√™ncia de valores).

### Regras para os nomes dos objetos

-   Podem ser compostos de letras, n√∫meros, "\_" e "." (ex: `dados <- 1`, `dados2 <- 1`, `dados_2 <- 1` e `dados.2 <- 1`)

-   N√£o pode come√ßar com um n√∫mero e/ou um ponto (ex: `1dados <- 1` ou `.dados <- 1`)

-   N√£o pode conter espa√ßos (ex: `dados 2 <- 1`)

-   Evitar o uso de acentua√ß√£o gr√°fica (ex: `n√∫mero <- 1`)

-   Evite usar nomes de fun√ß√µes (ex: `soma`, `diff`, `df`, `var`, `pt`)

-   E lembrar que, como eu j√° disse, o R diferencia mai√∫sculas de min√∫sculas (`obj` ‚â† `OBJ` ‚â† `Obj`)

### Ok, mas quais s√£o os tipos de valores que podemos atribuir a um objeto?

Os objetos possuem tr√™s caracter√≠sticas: Nome + conte√∫do + atributo do conte√∫do.

O atributo pode ser dividido em duas categorias: 1. Classe e 2. Estrutura do dado.

#### 1. Classe

A classe √© essencial em R! √â aqui que fun√ß√µes e operadores podem saber exatamente o que fazer com o(s) objeto(s). Por exemplo, √© poss√≠vel somar dois objetos num√©ricos, ...

```{r}
a + A
```

... mas n√£o podemos somar dois objetos de tipo caracter.

```{r eval=FALSE, message=FALSE, warning=FALSE, include=TRUE}
b <- "bola"
B <- "Bola"
b + B
```

```{r echo=FALSE, message=FALSE, warning=FALSE}
b <- "bola"
B <- "Bola"
print("Error in b + B : non-numeric argument to binary operator")
```

R tem cinco classes b√°sicas de objetos, tamb√©m chamados de objetos at√¥micos, entre elas:

        * Booleanos (ou logical): Valores de verdadeiro ou falso

```{r}
verdade <- TRUE
falso <- FALSE
```

        * N√∫mericos (double ou integer)

```{r}
x <- 1.5
y <- 2
```

        * Valores de caracteres (ou valores string)

```{r}
meu_nome <- 'Isabella'
```

#### Estrutura do objeto

A estrutura de um objeto √© a forma como os dados s√£o organizados (unidimensional, bidimensional, apenas n√∫meros ou caracteres, etc.). As formas mais comuns com as quais trabalhamos s√£o:

      * Vetores: Objeto unidimensional que possui uma √∫nica classe de valor. Usamos a fun√ß√£o "concatenar" ou c()¬π para atribuir uma s√©rie de valores (separador por v√≠rgula) ao objeto de tipo vetor.  

```{r}
vetor <- c("banana", "ma√ßa", "uva") 
vetor
```

```{r}
vetor2 <- c(1, 2, 3, 5)
vetor2
```

> <small> ‚ö† ¬π[A ideia b√°sica de uma fun√ß√£o √© encapsular um c√≥digo de programa√ß√£o que pode ser invocado/chamado a qualquer momento. Seu significado e uso s√£o muito semelhantes aos das fun√ß√µes matem√°ticas; h√° um nome, uma defini√ß√£o e uma invoca√ß√£o da fun√ß√£o](https://www.ime.usp.br/~leo/mac2166/2017-1/introducao_funcoes.html). No final deste tutorial falamos mais sobre fun√ß√µes. ‚ö† </small>

        * Listas: Uma lista √© uma cole√ß√£o unidimensional de objetos. Os objetos que comp√µem uma lista podem conter uma ou mais classes de valores. As listas s√£o criadas ccom a fun√ß√£o list(objetoA, objetoB, ...).

```{r}
lista <- list(A, b, vetor, vetor2, meu_nome)
lista
```

> ‚ö† Observe que as listas utilizam como "valores" os objetos que foram criados anteriormente. ‚ö†

        * Dataframe: S√£o objetos bidimensionais - as famosas tabelas linhas x colunas (as que costumamos trabalhar no Excel). Nas colunas temos as vari√°veis/features e nas linhas nossas unidades observacionais/experimentais.

![](excel.png)

> √â poss√≠vel criar um dataframe diretamente em R com a fun√ß√£o `data.frame(vetor1, vetor2, ...)`; MAS, para facilitar sua vida, veremos como importar um data frame **pronto** para o R na segunda parte deste tutorial‚úåÔ∏è.

### E se eu n√£o conseguir identificar qual √© o *tipo* do meu objeto?

Apesar de parecer uma pergunta simples, n√£o conhecer o *tipo* do seu objeto √© um problema que acontece com certa frequ√™ncia. Como solu√ß√£o, podemos usar a fun√ß√£o `typeof(objeto)`, que determina o tipo ou modo de armazenamento dos valores de qualquer objeto.

```{r}
typeof(verdade)
```

```{r}
typeof(vetor)
```

```{r}
typeof(lista)
```

### Opera√ß√µes

Uma vez que voc√™ tem um ou mais objetos salvos, voc√™ pode fazer uma s√©rie de opera√ß√µes com eles.

Come√ßando pelo mais simples, voc√™ pode usar o R como uma ‚ú®**calculadora**‚ú®. Por exemplo, √© poss√≠vel subtrair o valor de **x** do objeto **y** (`y-x`),...

```{r}
x <- 23
y <- 37

y-x
x-y

```

Ou at√© mesmo multiplic√°-los (`x*y`) ou dividi-los (`x/y`).

```{r}
x*y
x/y
```

Voc√™ tamb√©m pode comparar valores. Essas opera√ß√µes precisam de alguns s√≠mbolos importantes:

| S√≠mbolo de compara√ß√£o | Aplica√ß√£o com dois objetos | Significado            |
|-----------------------|----------------------------|------------------------|
| &                     | `A&B`                      | A e B                  |
| \|                    | `A|B`                      | A ou B                 |
| ==                    | `A==B`                     | A igual B¬≤             |
| !=                    | `A!=B`                     | A diferente de B       |
| !                     | `A!B`                      | A nega√ß√£o B            |
| \>=                   | `A>=B`                     | A maior ou igual a B   |
| \<=                   | `A<=B`                     | A menor ou igual a B   |
| \>                    | `A>B`                      | A maior que B          |
| \<                    | `A<B`                      | A menor que B          |
| :                     | `A:B`                      | De A at√© B (sequ√™ncia) |

> **‚ö†Ô∏è Aten√ß√£o**Ô∏è:
>
> ¬≤A compara√ß√£o de valores de objetos sempre √© feita com dois iguais em sequ√™ncia (`objA==objB`). Um √∫nico igual (`objA=objB`) √© para uso de *atribui√ß√£o*, ou seja, tem o mesmo valor que "`objA<-objB`".

Ao comparar os valores, a sa√≠da ser√° um booleano, ou seja, se a compara√ß√£o √© verdadeira (TRUE) ou falsa (FALSE). Por exemplo:

O valor de **A** (=2) √© igual ao de **a** (=1)?

```{r}
A == a
```

O valor de **a** (=1) √© menor que o de **A** (=2)?

```{r}
a < A
```

O valor de **A** (=2) e de **a** (=1) s√£o diferentes de **c** (=1)?

```{r}
c <- 1
A&a != c
```

Outra opera√ß√£o interessante que podemos fazer com R √© üëâ**acessar os valores contidos em um objeto por sua(s) posi√ß√£o(√µes)üëà**. Para isso, √© comum usar colchetes, onde inserimos a posi√ß√£o da qual queremos saber um valor (`nome_objeto[posi√ß√£o]`) e obtemos o valor dessa posi√ß√£o como uma sa√≠da.

<center>

![](manejo1.png){width="493"}

</center>

Vamos replicar o nosso exemplo em c√≥digo R:

```{r}
objX <- c(20, 21, 22, 23, 24, 25)
objX[1]
```

Se quisermos acessar todos os valores do nosso objeto, exceto uma posi√ß√£o qualquer, podemos usar o s√≠mbolo de menos (`nome_objeto[-posi√ß√£o]`). Por exemplo, se quisermos ver todos os valores de objX, exceto o contido na posi√ß√£o 3:

```{r}
objX[-3]
```

Tamb√©m podemos aplicar operadores matem√°ticos a vetores em conjunto com a indexa√ß√£o:

-   √â poss√≠vel multiplicar por 2 os elementos entre 1 e 3 de ObjX...

```{r}
objX[1:3]*2
```

> üëÜ Observe que multiplicar um vetor √© equivalente a multiplicar cada uma de suas entradas pelo valor do multiplicador.

-   ... ou perguntar ao R se os elementos 1 e 5 s√£o iguais a 20.

```{r}
objX[c(1,5)] == 20
```

-   Tamb√©m podemos aplicar fun√ß√µes que calculam algumas estat√≠sticas de tend√™ncia central ou de variabilidade, como a m√©dia e vari√¢ncia:

```{r}
mean(objX[2:5])
var(objX[2:5])
```

**Mas e como fazemos para acessar os valores de uma lista?** ü§î

Assim como os vetores: `nome_lista[posi√ß√£o]`! Por exemplo, qual √© o terceiro elemento do meu objeto "**lista**"?

```{r}
lista[3]
```

Tamb√©m √© poss√≠vel acessar diretamente os valores de um objeto em nossa lista usando dois colchetes: `nome_lista[[posi√ß√£o]]`:

```{r}
lista[[3]]
```

Se eu quiser acessar um elemento de um objeto que faz parte de uma lista: `nome_lista[[posi√ß√£o_objeto]][posi√ß√£o_elemento]`. Por exemplo, para acessar o segundo elemento contido no objeto 3 de lista:

```{r}
lista[[3]][2]
```

### Fun√ß√µes em R?

Os **objetos** s√£o nomes que cont√™m valores (`objeto <- valor`), enquanto **fun√ß√µes** s√£o nomes que cont√™m um c√≥digo R (`nome_fun√ß√£o()` ‚Üí `{c√≥digo R}` ‚Üí *resultado*). A ideia b√°sica de uma fun√ß√£o √© encapsular um c√≥digo que pode ser chamado a qualquer momento em R. (...)

# FIM! üèÉ

Espero que a sua experi√™ncia tenha sido remotamente agrad√°vel e que voc√™ tenha menos medo de se aventurar no R üíô. No pr√≥ximo tutorial, vamos falar sobre pacotes, dataframes, tibbles, tidyverse, dplyr e mais manipula√ß√£o de dados!
